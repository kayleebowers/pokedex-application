let pokemonRepository=function(){let e=[];function t(){return e}function n(t){if("object"!=typeof t||!("name"in t))return"Not an object";e.push(t)}function o(e){pokemonRepository.loadDetails(e).then(function(){a(e)})}let i=document.querySelector("#pokemonModal");function a(e){let t=$(".modal-body"),n=$(".modal-title");$(".modal-header"),n.empty(),t.empty();let o=$("<h1>"+e.name+"</h1>"),i=$("<img>");i.attr("src",e.imageUrl),i.attr("alt","pokemon image"),i.addClass("modal-img");let a=$("<p>Height: "+e.height+"</p>"),l=$("<p>Types: "+e.types+"</p>");n.append(o),t.append(i),t.append(a),t.append(l)}function l(){i.classList.remove("visible")}function r(){window.addEventListener("DOMContentLoaded",function(){console.log("Data is loading")})}function s(){r&&(removeEventListener("DOMContentLoaded",r),console.log("Data is ready"))}window.addEventListener("keydown",function(e){"Escape"===e.key&&i.classList.contains("visible")&&l()});let p=document.querySelector(".search-bar__input"),c=p.value;function d(){c=p.value}function u(){c=p.value,e.filter(function(e){e.name.toUpperCase()===c.toUpperCase()&&($("#pokemonModal").modal("toggle"),o(e))})}return p.addEventListener("input",d),document.querySelector(".search-bar__button").addEventListener("click",u),{getAll:t,add:n,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),i=document.createElement("li");i.classList.add("pokemonList__item");let a=document.createElement("button");a.innerText=t.name,a.classList.add("pokemon__name","btn"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#pokemonModal"),n.appendChild(i),i.appendChild(a),function e(t,n){t.addEventListener("click",function(){o(n)})}(a,t)},showDetails:o,loadList:function e(){return r(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(s()).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(s).catch(function(e){console.error(e)})},loadDetails:function e(t){let n=t.detailsUrl;return r(),fetch(n).then(function(e){return e.json()}).then(function(e){if(t.imageUrl=e.sprites.front_default,t.height=e.height,t.types="",e.types.length>=1)for(let n=0;n<e.types.length;n++)t.types=t.types+"  "+e.types[n].type.name}).catch(function(e){console.error(e)})},showModal:a,showLoadingMessage:r,hideLoadingMessage:s,hideModal:l,getSearchInput:d,searchForInput:u}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});